<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIP, Steuern und Schulden - Detaillierte Tabelle (1991-2024)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
            margin: 0;
        }
        .container {
            max-width: 1800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            font-size: 32px;
            margin-bottom: 10px;
            color: #333;
        }
        .subtitle {
            text-align: center;
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }
        .info {
            background: #f0f8ff;
            border-left: 4px solid #4A90E2;
            padding: 15px;
            margin: 20px 0;
        }
        .nav-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }
        .nav-buttons button {
            padding: 10px 20px;
            background: #4A90E2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background 0.2s;
        }
        .nav-buttons button:hover {
            background: #357ABD;
        }
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            align-items: center;
            flex-wrap: wrap;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
        }
        .controls label {
            font-weight: 600;
            color: #333;
        }
        .controls select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            background: white;
        }
        .table-section {
            margin: 30px 0;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #4A90E2;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        .table-wrapper {
            overflow-x: auto;
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
            margin-top: 15px;
        }
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
            padding: 10px 8px;
            text-align: right;
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 0;
            z-index: 10;
            white-space: nowrap;
        }
        th:first-child {
            text-align: left;
        }
        th.section-header {
            font-size: 12px;
            padding: 8px 8px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        /* Farben f√ºr Section Header */
        th.section-header:nth-child(2) {
            background: #d6e9f5;
            border-left: 3px solid #4A90E2;
        }
        th.section-header:nth-child(3) {
            background: #ffe4cc;
            border-left: 3px solid #E67E22;
        }
        th.section-header:nth-child(4) {
            background: #d4f1e8;
            border-left: 3px solid #27ae60;
        }
        th.section-header:nth-child(5) {
            background: #e8dbed;
            border-left: 3px solid #8e44ad;
        }
        td {
            padding: 10px 8px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }
        td:first-child {
            text-align: left;
            font-weight: 600;
        }
        /* Visuelle Trennung zwischen Hauptbereichen - f√ºr alle Zeilen inkl. Header */
        /* Spalte 2: erste Spalte "Absolute Werte" (gilt f√ºr tbody und thead Zeile 2) */
        td:nth-child(2),
        thead tr:nth-child(2) th:nth-child(1) {
            border-left: 3px solid #4A90E2;
        }
        /* Spalte 6: erste Spalte "Pro-Kopf Nominal" (5. th in Zeile 2, da Jahr nicht mitgez√§hlt) */
        td:nth-child(6),
        thead tr:nth-child(2) th:nth-child(5) {
            border-left: 3px solid #E67E22;
        }
        /* Spalte 10: erste Spalte "Indices" (9. th in Zeile 2) */
        td:nth-child(10),
        thead tr:nth-child(2) th:nth-child(9) {
            border-left: 3px solid #27ae60;
        }
        /* Spalte 14: erste Spalte "Pro-Kopf Real" (13. th in Zeile 2) */
        td:nth-child(14),
        thead tr:nth-child(2) th:nth-child(13) {
            border-left: 3px solid #8e44ad;
        }
        /* Erste Header-Zeile (colspan) */
        thead tr:nth-child(1) th:nth-child(2) {
            border-left: 3px solid #4A90E2;
        }
        thead tr:nth-child(1) th:nth-child(3) {
            border-left: 3px solid #E67E22;
        }
        thead tr:nth-child(1) th:nth-child(4) {
            border-left: 3px solid #27ae60;
        }
        thead tr:nth-child(1) th:nth-child(5) {
            border-left: 3px solid #8e44ad;
        }

        /* Unterschiedliche Hintergrundfarben f√ºr Bereiche */
        /* Absolute Werte: Spalten 2-5 */
        td:nth-child(2), td:nth-child(3), td:nth-child(4), td:nth-child(5) {
            background-color: #f8f9fa;
        }
        th.col-absolute {
            background-color: #e3ecf2;
        }
        /* Pro-Kopf Nominal: Spalten 6-9 */
        td:nth-child(6), td:nth-child(7), td:nth-child(8), td:nth-child(9) {
            background-color: #fff4e6;
        }
        th.col-perCapita {
            background-color: #ffe4cc;
        }
        /* Indices: Spalten 10-13 */
        td:nth-child(10), td:nth-child(11), td:nth-child(12), td:nth-child(13) {
            background-color: #e8f8f5;
        }
        th.col-relative {
            background-color: #d4f1e8;
        }
        /* Pro-Kopf Real: Spalten 14-16 */
        td:nth-child(14), td:nth-child(15), td:nth-child(16) {
            background-color: #f4ecf7;
        }
        th.col-real {
            background-color: #e8dbed;
        }

        /* Hover-Effekt f√ºr gesamte Zeile */
        tr:hover td {
            filter: brightness(0.95);
        }

        /* Highlight-Zeilen (1991, 2000, 2010, 2020, 2024) */
        .highlight-row td:nth-child(2), .highlight-row td:nth-child(3),
        .highlight-row td:nth-child(4), .highlight-row td:nth-child(5) {
            background-color: #fff9e6;
            font-weight: 600;
        }
        .highlight-row td:nth-child(6), .highlight-row td:nth-child(7),
        .highlight-row td:nth-child(8), .highlight-row td:nth-child(9) {
            background-color: #ffe8cc;
            font-weight: 600;
        }
        .highlight-row td:nth-child(10), .highlight-row td:nth-child(11),
        .highlight-row td:nth-child(12), .highlight-row td:nth-child(13) {
            background-color: #d4f1e8;
            font-weight: 600;
        }
        .highlight-row td:nth-child(14), .highlight-row td:nth-child(15),
        .highlight-row td:nth-child(16) {
            background-color: #e8dbed;
            font-weight: 600;
        }
        tr:hover {
            background-color: #f9f9f9;
        }
        .highlight-row {
            background-color: #fff9e6;
        }
        .number-positive {
            color: #27ae60;
        }
        .number-negative {
            color: #e74c3c;
        }
        .info-box {
            background: #f0f8ff;
            border-left: 4px solid #4A90E2;
            padding: 15px;
            margin: 20px 0;
        }
        .info-box h3 {
            margin-top: 0;
            color: #333;
            font-size: 20px;
        }
        .info-box ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .info-box li {
            margin: 8px 0;
            color: #555;
            line-height: 1.6;
        }
        .change-section {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
        }
        .change-item {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-left: 3px solid #E67E22;
        }
        @media (max-width: 1200px) {
            table {
                font-size: 11px;
            }
            th, td {
                padding: 8px 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>BIP, Steueraufkommen und Schuldenstand in Deutschland</h1>
        <div class="subtitle">Detaillierte Tabelle 1991-2024 - Absolute und Relative Werte</div>

        <div class="info">
            <strong>Datenquellen:</strong> Statistisches Bundesamt (Destatis), Bundesministerium der Finanzen (BMF)<br>
            <strong>Zeitraum:</strong> 1991-2024 (34 Jahre)<br>
            <strong>Methodik:</strong> Alle drei Zeitreihen (BIP, Steuern, Schulden) wurden mit den offiziellen realen BIP-Wachstumsraten deflationiert (einheitlicher Deflator, Basis: 1991)
        </div>
        
        <div class="nav-buttons">
            <button onclick="window.location.href='../../index.html'">üè† Home</button>
            <button onclick="window.location.href='gdp_tax_debt_comparison.html'">‚Üê Zur√ºck zur Grafik</button>
            <button onclick="exportToCSV()">üìä Als CSV exportieren</button>
        </div>

        <div class="controls">
            <label>Ansicht:</label>
            <select id="viewMode" onchange="toggleView()">
                <option value="all">Alle Spalten</option>
                <option value="absolute">Nur Absolute Werte</option>
                <option value="relative">Nur Relative Werte (Indices)</option>
                <option value="perCapita">Nur Pro-Kopf Werte</option>
            </select>
            
            <label style="margin-left: 20px;">Zeitraum:</label>
            <select id="periodFilter" onchange="filterPeriod()">
                <option value="all">Alle Jahre (1991-2024)</option>
                <option value="1990s">1990er Jahre</option>
                <option value="2000s">2000er Jahre</option>
                <option value="2010s">2010er Jahre</option>
                <option value="2020s">2020er Jahre</option>
                <option value="decade">Jedes 5. Jahr</option>
            </select>
        </div>
        
        <div class="table-section">
            <h2>Komplette Daten√ºbersicht 1991-2024</h2>
            <div class="table-wrapper">
                <table id="dataTable">
                <thead>
                    <tr>
                        <th rowspan="2">Jahr</th>
                        <th colspan="4" class="section-header">ABSOLUTE WERTE</th>
                        <th colspan="4" class="section-header">PRO-KOPF NOMINAL</th>
                        <th colspan="4" class="section-header">INDICES (1991=100)</th>
                        <th colspan="3" class="section-header">PRO-KOPF REAL (1991er ‚Ç¨)</th>
                    </tr>
                    <tr>
                        <!-- Absolute Werte -->
                        <th class="col-absolute">BIP<br>(Mrd. ‚Ç¨)</th>
                        <th class="col-absolute">Steuern<br>(Mrd. ‚Ç¨)</th>
                        <th class="col-absolute">Schulden<br>(Mrd. ‚Ç¨)</th>
                        <th class="col-absolute">Bev√∂lk.<br>(Mio.)</th>
                        <!-- Pro Kopf Nominal -->
                        <th class="col-perCapita">BIP<br>(‚Ç¨)</th>
                        <th class="col-perCapita">Steuern<br>(‚Ç¨)</th>
                        <th class="col-perCapita">Schulden<br>(‚Ç¨)</th>
                        <th class="col-perCapita">Steuerquote<br>(%)</th>
                        <!-- Indices -->
                        <th class="col-relative">BIP p.K.<br>Index</th>
                        <th class="col-relative">Steuern p.K.<br>Index</th>
                        <th class="col-relative">Schulden p.K.<br>Index</th>
                        <th class="col-relative">Wachstum<br>seit 1991</th>
                        <!-- Real in 1991er Euro -->
                        <th class="col-real">BIP<br>(‚Ç¨)</th>
                        <th class="col-real">Steuern<br>(‚Ç¨)</th>
                        <th class="col-real">Schulden<br>(‚Ç¨)</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Wird mit JavaScript gef√ºllt -->
                </tbody>
            </table>
        </div>
        </div>

        <div class="info-box">
            <h3>Erl√§uterungen zur Tabelle</h3>
            <ul>
                <li><strong>Absolute Werte:</strong> Nominale Werte in Milliarden Euro bzw. Millionen Einwohner</li>
                <li><strong>Pro-Kopf Nominal:</strong> Nominale Werte pro Einwohner in Euro</li>
                <li><strong>Indices (1991=100):</strong> Reale Entwicklung seit 1991, deflationiert mit einheitlichem BIP-Deflator</li>
                <li><strong>Pro-Kopf Real (1991er ‚Ç¨):</strong> Kaufkraftbereinigte Werte, umgerechnet in 1991er Preisniveau</li>
                <li><strong>Steuerquote:</strong> Anteil der Steuern am BIP in Prozent</li>
            </ul>
        </div>

        <div class="change-section">
            <h2>Ver√§nderungen 1991-2024</h2>

            <div class="change-item">
                <strong>BIP pro Kopf (real):</strong> +40% seit 1991
                <span class="positive">(Index: 100 ‚Üí 140)</span>
            </div>
            <div class="change-item">
                <strong>Steuern pro Kopf (real):</strong> +44% seit 1991
                <span class="positive">(Index: 100 ‚Üí 144)</span>
            </div>
            <div class="change-item">
                <strong>Schulden pro Kopf (real):</strong> +98% seit 1991
                <span class="positive">(Index: 100 ‚Üí 198)</span>
            </div>
            <div class="change-item">
                <strong>Steuerquote:</strong> 22,0% (1991) ‚Üí 22,0% (2024)
                <span class="positive">(¬±0 Prozentpunkte)</span>
            </div>
            <div class="change-item">
                <strong>Nominale Entwicklung:</strong>
                <ul style="margin: 5px 0; padding-left: 20px;">
                    <li>BIP: 1.592 Mrd. ‚Ç¨ ‚Üí 4.329 Mrd. ‚Ç¨ (+172%)</li>
                    <li>Steuern: 338 Mrd. ‚Ç¨ ‚Üí 948 Mrd. ‚Ç¨ (+181%)</li>
                    <li>Schulden: 600 Mrd. ‚Ç¨ ‚Üí 2.509 Mrd. ‚Ç¨ (+318%)</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // Nominale BIP-Werte in Mrd. Euro (Quelle: Statistisches Bundesamt, 81000-0001)
        const nominalBIP = [
            {year: 1991, bip: 1591.61},
            {year: 1992, bip: 1709.89},
            {year: 1993, bip: 1757.34},
            {year: 1994, bip: 1838.02},
            {year: 1995, bip: 1899.93},
            {year: 1996, bip: 1928.56},
            {year: 1997, bip: 1967.18},
            {year: 1998, bip: 2022.31},
            {year: 1999, bip: 2077.24},
            {year: 2000, bip: 2129.66},
            {year: 2001, bip: 2195.53},
            {year: 2002, bip: 2223.36},
            {year: 2003, bip: 2240.81},
            {year: 2004, bip: 2293.04},
            {year: 2005, bip: 2325.71},
            {year: 2006, bip: 2426.18},
            {year: 2007, bip: 2542.22},
            {year: 2008, bip: 2589.28},
            {year: 2009, bip: 2493.97},
            {year: 2010, bip: 2615.26},
            {year: 2011, bip: 2746.91},
            {year: 2012, bip: 2799.28},
            {year: 2013, bip: 2866.48},
            {year: 2014, bip: 2984.47},
            {year: 2015, bip: 3087.03},
            {year: 2016, bip: 3195.21},
            {year: 2017, bip: 3333.11},
            {year: 2018, bip: 3434.03},
            {year: 2019, bip: 3537.28},
            {year: 2020, bip: 3450.72},
            {year: 2021, bip: 3682.34},
            {year: 2022, bip: 3989.39},
            {year: 2023, bip: 4219.31},
            {year: 2024, bip: 4328.97}
        ];

        // Steueraufkommen, Bev√∂lkerung und Schuldenstand
        const historicalData = [
            {year: 1991, tax: 338, population: 80.3, debt: 600},
            {year: 1992, tax: 374, population: 80.6, debt: 686},
            {year: 1993, tax: 383, population: 81.2, debt: 770},
            {year: 1994, tax: 402, population: 81.4, debt: 848},
            {year: 1995, tax: 416, population: 81.7, debt: 1019},
            {year: 1996, tax: 409, population: 81.9, debt: 1083},
            {year: 1997, tax: 408, population: 82.1, debt: 1132},
            {year: 1998, tax: 426, population: 82.0, debt: 1165},
            {year: 1999, tax: 453, population: 82.2, debt: 1200},
            {year: 2000, tax: 467, population: 82.3, debt: 1211},
            {year: 2001, tax: 446, population: 82.4, debt: 1224},
            {year: 2002, tax: 442, population: 82.5, debt: 1277},
            {year: 2003, tax: 442, population: 82.5, debt: 1358},
            {year: 2004, tax: 443, population: 82.5, debt: 1430},
            {year: 2005, tax: 452, population: 82.4, debt: 1490},
            {year: 2006, tax: 488, population: 82.3, debt: 1545},
            {year: 2007, tax: 538, population: 82.2, debt: 1552},
            {year: 2008, tax: 561, population: 82.0, debt: 1578},
            {year: 2009, tax: 524, population: 81.8, debt: 1694},
            {year: 2010, tax: 530, population: 81.8, debt: 2012},
            {year: 2011, tax: 573, population: 80.3, debt: 2025},
            {year: 2012, tax: 601, population: 80.5, debt: 2068},
            {year: 2013, tax: 620, population: 80.8, debt: 2043},
            {year: 2014, tax: 644, population: 81.2, debt: 2044},
            {year: 2015, tax: 673, population: 82.2, debt: 2021},
            {year: 2016, tax: 706, population: 82.5, debt: 2009},
            {year: 2017, tax: 735, population: 82.8, debt: 1969},
            {year: 2018, tax: 776, population: 83.0, debt: 1916},
            {year: 2019, tax: 799, population: 83.2, debt: 1899},
            {year: 2020, tax: 740, population: 83.2, debt: 2173},
            {year: 2021, tax: 833, population: 83.2, debt: 2321},
            {year: 2022, tax: 896, population: 84.4, debt: 2368},
            {year: 2023, tax: 916, population: 84.5, debt: 2445},
            {year: 2024, tax: 948, population: 83.6, debt: 2509}
        ];

        // Reale Wachstumsraten BIP (Quelle: Destatis 81000-0001, VGRPKM - preisbereinigt, Kettenindex 2020=100)
        const realGrowthRates = [
            0, 2.0, -1.0, 2.6, 1.5, 1.0, 1.9, 2.1, 2.1,
            2.9, 1.6, -0.2, -0.5, 1.2, 0.9, 3.9, 2.9, 0.9, -5.5,
            4.1, 3.8, 0.5, 0.4, 2.2, 1.7, 2.2, 2.8, 1.1, 1.0,
            -4.1, 3.9, 1.8, -0.9, -0.5
        ];

        // Berechnungen
        let allData = [];
        let bipRealIndex = 100;
        
        for (let i = 0; i < nominalBIP.length; i++) {
            // Realer BIP-Index (kumulativ)
            if (i > 0) {
                bipRealIndex = bipRealIndex * (1 + realGrowthRates[i] / 100);
            }
            
            // Bev√∂lkerungsindex
            const populationIndex = (historicalData[i].population / historicalData[0].population) * 100;
            
            // BIP pro Kopf Index (real)
            const bipPerCapitaIdx = (bipRealIndex / populationIndex) * 100;
            
            // Deflator berechnen
            const deflator = nominalBIP[i].bip / (nominalBIP[0].bip * (bipRealIndex / 100));
            
            // Steueraufkommen real
            const realTax = historicalData[i].tax / deflator;
            const realTaxIdx = (realTax / historicalData[0].tax) * 100;
            const taxPerCapitaIdx = (realTaxIdx / populationIndex) * 100;
            
            // Schuldenstand pro Kopf
            const debtPerCapitaNominal = (historicalData[i].debt * 1e9) / (historicalData[i].population * 1e6);
            const debtPerCapitaNominal1990 = (historicalData[0].debt * 1e9) / (historicalData[0].population * 1e6);
            const realDebtPerCapita = debtPerCapitaNominal / deflator;
            const debtPerCapitaIdx = (realDebtPerCapita / (debtPerCapitaNominal1990)) * 100;
            
            // Pro Kopf Werte nominal
            const bipPerCapitaNom = (nominalBIP[i].bip * 1e9) / (historicalData[i].population * 1e6);
            const taxPerCapitaNom = (historicalData[i].tax * 1e9) / (historicalData[i].population * 1e6);
            
            // Pro Kopf Werte real (1991er Euro)
            const bipPerCapita1990 = (nominalBIP[0].bip * 1e9) / (historicalData[0].population * 1e6);
            const taxPerCapita1990 = (historicalData[0].tax * 1e9) / (historicalData[0].population * 1e6);
            const debtPerCapita1990 = (historicalData[0].debt * 1e9) / (historicalData[0].population * 1e6);
            
            const bipPerCapitaReal = bipPerCapita1990 * (bipPerCapitaIdx / 100);
            const taxPerCapitaReal = taxPerCapita1990 * (taxPerCapitaIdx / 100);
            const debtPerCapitaReal = debtPerCapita1990 * (debtPerCapitaIdx / 100);
            
            // Steuerquote
            const taxQuote = (historicalData[i].tax / nominalBIP[i].bip) * 100;
            
            allData.push({
                year: nominalBIP[i].year,
                bipNom: nominalBIP[i].bip,
                taxNom: historicalData[i].tax,
                debtNom: historicalData[i].debt,
                population: historicalData[i].population,
                bipPerCapitaNom: bipPerCapitaNom,
                taxPerCapitaNom: taxPerCapitaNom,
                debtPerCapitaNom: debtPerCapitaNominal,
                taxQuote: taxQuote,
                bipPerCapitaIdx: bipPerCapitaIdx,
                taxPerCapitaIdx: taxPerCapitaIdx,
                debtPerCapitaIdx: debtPerCapitaIdx,
                growthRate: realGrowthRates[i],
                bipPerCapitaReal: bipPerCapitaReal,
                taxPerCapitaReal: taxPerCapitaReal,
                debtPerCapitaReal: debtPerCapitaReal
            });
        }

        function renderTable(data = allData) {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            data.forEach(row => {
                const tr = document.createElement('tr');
                
                // Highlight besondere Jahre
                if ([1991, 2000, 2010, 2020, 2024].includes(row.year)) {
                    tr.classList.add('highlight-row');
                }
                
                tr.innerHTML = `
                    <td>${row.year}</td>
                    <!-- Absolute Werte -->
                    <td class="col-absolute">${row.bipNom.toLocaleString('de-DE', {maximumFractionDigits: 1})}</td>
                    <td class="col-absolute">${row.taxNom.toLocaleString('de-DE', {maximumFractionDigits: 0})}</td>
                    <td class="col-absolute">${row.debtNom.toLocaleString('de-DE', {maximumFractionDigits: 0})}</td>
                    <td class="col-absolute">${row.population.toLocaleString('de-DE', {maximumFractionDigits: 1})}</td>
                    <!-- Pro Kopf Nominal -->
                    <td class="col-perCapita">${Math.round(row.bipPerCapitaNom).toLocaleString('de-DE')}</td>
                    <td class="col-perCapita">${Math.round(row.taxPerCapitaNom).toLocaleString('de-DE')}</td>
                    <td class="col-perCapita">${Math.round(row.debtPerCapitaNom).toLocaleString('de-DE')}</td>
                    <td class="col-perCapita">${row.taxQuote.toFixed(1)}%</td>
                    <!-- Indices -->
                    <td class="col-relative">${row.bipPerCapitaIdx.toFixed(1)}</td>
                    <td class="col-relative">${row.taxPerCapitaIdx.toFixed(1)}</td>
                    <td class="col-relative">${row.debtPerCapitaIdx.toFixed(1)}</td>
                    <td class="col-relative ${row.growthRate >= 0 ? 'number-positive' : 'number-negative'}">
                        ${row.growthRate > 0 ? '+' : ''}${row.growthRate.toFixed(1)}%
                    </td>
                    <!-- Real in 1991er Euro -->
                    <td class="col-real">${Math.round(row.bipPerCapitaReal).toLocaleString('de-DE')}</td>
                    <td class="col-real">${Math.round(row.taxPerCapitaReal).toLocaleString('de-DE')}</td>
                    <td class="col-real">${Math.round(row.debtPerCapitaReal).toLocaleString('de-DE')}</td>
                `;
                
                tbody.appendChild(tr);
            });
        }

        function toggleView() {
            const mode = document.getElementById('viewMode').value;
            const table = document.getElementById('dataTable');

            // Alle Spalten erst mal anzeigen
            table.querySelectorAll('.col-absolute, .col-perCapita, .col-relative, .col-real').forEach(el => {
                el.style.display = '';
            });

            // Je nach Modus Spalten ausblenden
            if (mode === 'absolute') {
                table.querySelectorAll('.col-relative, .col-real, .col-perCapita').forEach(el => {
                    el.style.display = 'none';
                });
            } else if (mode === 'relative') {
                table.querySelectorAll('.col-absolute, .col-perCapita').forEach(el => {
                    el.style.display = 'none';
                });
            } else if (mode === 'perCapita') {
                table.querySelectorAll('.col-absolute').forEach(el => {
                    el.style.display = 'none';
                });
            }
        }

        function filterPeriod() {
            const period = document.getElementById('periodFilter').value;
            let filteredData = allData;
            
            if (period === '1990s') {
                filteredData = allData.filter(d => d.year >= 1991 && d.year < 2000);
            } else if (period === '2000s') {
                filteredData = allData.filter(d => d.year >= 2000 && d.year < 2010);
            } else if (period === '2010s') {
                filteredData = allData.filter(d => d.year >= 2010 && d.year < 2020);
            } else if (period === '2020s') {
                filteredData = allData.filter(d => d.year >= 2020);
            } else if (period === 'decade') {
                filteredData = allData.filter(d => d.year % 5 === 0 || d.year === 2024);
            }
            
            renderTable(filteredData);
        }

        function exportToCSV() {
            let csv = 'Jahr;BIP (Mrd. ‚Ç¨);Steuern (Mrd. ‚Ç¨);Schulden (Mrd. ‚Ç¨);Bev√∂lkerung (Mio.);';
            csv += 'BIP p.K. nominal (‚Ç¨);Steuern p.K. nominal (‚Ç¨);Schulden p.K. nominal (‚Ç¨);Steuerquote (%);';
            csv += 'BIP p.K. Index;Steuern p.K. Index;Schulden p.K. Index;Wachstum (%);';
            csv += 'BIP p.K. real (1991er ‚Ç¨);Steuern p.K. real (1991er ‚Ç¨);Schulden p.K. real (1991er ‚Ç¨)\n';
            
            allData.forEach(row => {
                csv += `${row.year};`;
                csv += `${row.bipNom.toFixed(1)};${row.taxNom};${row.debtNom};${row.population.toFixed(1)};`;
                csv += `${Math.round(row.bipPerCapitaNom)};${Math.round(row.taxPerCapitaNom)};${Math.round(row.debtPerCapitaNom)};${row.taxQuote.toFixed(1)};`;
                csv += `${row.bipPerCapitaIdx.toFixed(1)};${row.taxPerCapitaIdx.toFixed(1)};${row.debtPerCapitaIdx.toFixed(1)};${row.growthRate.toFixed(1)};`;
                csv += `${Math.round(row.bipPerCapitaReal)};${Math.round(row.taxPerCapitaReal)};${Math.round(row.debtPerCapitaReal)}\n`;
            });
            
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'bip_steuern_schulden_1991-2024.csv';
            link.click();
        }

        // Initial render
        renderTable();
    </script>
</body>
</html>
